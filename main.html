<!DOCTYPE html>

<html>
  <head>
    <link rel="stylesheet" href="styles.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD"
      crossorigin="anonymous"
    />
  </head>

  <body>
    <!-- the entire body must be written by student -->
    <table class="table table-striped table-hover table-bordered">
      <thead>
        <tr>
          <th>Promise Name</th>
          <th>Time taken (s)</th>
        </tr>
      </thead>
      <tbody id="output"></tbody>
    </table>

    <script type="text/javascript" src="./script.js">



		// script.js

// Function to create a Promise that resolves after a random time between min and max seconds
function createRandomPromise(min, max) {
  const randomTime = Math.floor(Math.random() * (max - min + 1)) + min;
  return new Promise(resolve => {
    setTimeout(() => {
      resolve(randomTime);
    }, randomTime * 1000);
  });
}

// Function to update the table with the resolved values
function updateTable(promisesResults) {
  const outputTable = document.getElementById('output');

  // Remove the loading row
  outputTable.innerHTML = '';

  // Populate the table with the required values
  promisesResults.forEach((result, index) => {
    const row = outputTable.insertRow(index);
    const cell1 = row.insertCell(0);
    const cell2 = row.insertCell(1);

    cell1.textContent = `Promise ${index + 1}`;
    cell2.textContent = result.toFixed(3); // Display time with 3 decimal places
  });

  // Calculate and display the total time taken
  const totalTime = promisesResults.reduce((sum, time) => sum + time, 0);
  const totalRow = outputTable.insertRow(promisesResults.length);
  const totalCell1 = totalRow.insertCell(0);
  const totalCell2 = totalRow.insertCell(1);
  totalCell1.textContent = 'Total';
  totalCell2.textContent = totalTime.toFixed(3);
}

// Create an array of three Promises
const promises = [
  createRandomPromise(1, 3),
  createRandomPromise(1, 3),
  createRandomPromise(1, 3)
];

// Add a loading row to the table
const outputTable = document.getElementById('output');
const loadingRow = outputTable.insertRow(0);
const loadingCell = loadingRow.insertCell(0);
loadingCell.colSpan = 2;
loadingCell.textContent = 'Loading...';

// Wait for all promises to resolve using Promise.all
Promise.all(promises)
  .then(results => {
    // Update the table with the resolved values
    updateTable(results);
  })
  .catch(error => console.error('Error:', error));

	</script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
